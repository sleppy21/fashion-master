/* ============================================
   ANIMACIONES PARA MODALES - SISTEMA UNIFICADO
   Controla apertura/cierre suave de todos los modales
   ============================================ */

/* ================================================================
   ESTADOS BASE DE LOS MODALES
   ================================================================ */

/* Estado inicial: ocultos */
.favorites-modal,
.notifications-modal,
.user-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 99999;
    pointer-events: none;
}

/* ================================================================
   ANIMACIONES DE APERTURA
   ================================================================ */

/* Cuando el modal se abre - clase .modal-open */
.favorites-modal.modal-open,
.notifications-modal.modal-open,
.user-modal.modal-open {
    display: block !important;
    pointer-events: auto;
}

/* Animación de entrada para el contenido del modal */
.favorites-modal.modal-open .favorites-modal-content,
.notifications-modal.modal-open .notifications-modal-content,
.user-modal.modal-open .user-modal-content {
    animation: slideDownFadeIn 0.35s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes slideDownFadeIn {
    0% {
        opacity: 0;
        transform: translateY(-15px) scale(0.98);
    }
    50% {
        opacity: 0.8;
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* ================================================================
   ANIMACIONES DE CIERRE
   ================================================================ */

/* Cuando el modal se cierra - clase .modal-closing */
.favorites-modal.modal-closing .favorites-modal-content,
.notifications-modal.modal-closing .notifications-modal-content,
.user-modal.modal-closing .user-modal-content {
    animation: slideUpFadeOut 0.25s cubic-bezier(0.4, 0, 1, 1) forwards;
}

@keyframes slideUpFadeOut {
    0% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
    100% {
        opacity: 0;
        transform: translateY(-12px) scale(0.98);
    }
}

/* ================================================================
   OVERLAY (FONDO) - OPCIONAL PARA DROPDOWNS
   ================================================================ */

/* Fondo semi-transparente muy sutil (solo para dar contexto visual) */
.favorites-modal::before,
.notifications-modal::before,
.user-modal::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.03);
    opacity: 0;
    transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
}

.favorites-modal.modal-open::before,
.notifications-modal.modal-open::before,
.user-modal.modal-open::before {
    opacity: 1;
}

.favorites-modal.modal-closing::before,
.notifications-modal.modal-closing::before,
.user-modal.modal-closing::before {
    opacity: 0;
    transition-duration: 0.25s;
}

/* ================================================================
   MEJORAS VISUALES DURANTE ANIMACIÓN
   ================================================================ */

/* Suavizar transición de botón cerrar */
.favorites-modal-close,
.notifications-modal-close,
.user-modal-close {
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: center;
}

.favorites-modal-close:hover,
.notifications-modal-close:hover,
.user-modal-close:hover {
    transform: rotate(90deg) scale(1.1);
    opacity: 0.8;
}

.favorites-modal-close:active,
.notifications-modal-close:active,
.user-modal-close:active {
    transform: rotate(90deg) scale(0.95);
}

/* ================================================================
   RESPONSIVE - AJUSTES MÓVILES
   ================================================================ */

@media (max-width: 768px) {
    /* Animación más rápida y directa en móviles */
    .favorites-modal.modal-open .favorites-modal-content,
    .notifications-modal.modal-open .notifications-modal-content,
    .user-modal.modal-open .user-modal-content {
        animation-duration: 0.25s;
    }
    
    .favorites-modal.modal-closing .favorites-modal-content,
    .notifications-modal.modal-closing .notifications-modal-content,
    .user-modal.modal-closing .user-modal-content {
        animation-duration: 0.2s;
    }
    
    /* Overlay más rápido en móvil */
    .favorites-modal::before,
    .notifications-modal::before,
    .user-modal::before {
        transition-duration: 0.2s;
    }
}

/* ================================================================
   MODO OSCURO - COMPATIBILIDAD
   ================================================================ */

body.dark-mode .favorites-modal::before,
body.dark-mode .notifications-modal::before,
body.dark-mode .user-modal::before {
    background: rgba(0, 0, 0, 0.15);
}

/* ================================================================
   ACCESIBILIDAD
   ================================================================ */

/* Reducir movimiento para usuarios que lo prefieran */
@media (prefers-reduced-motion: reduce) {
    .favorites-modal.modal-open .favorites-modal-content,
    .notifications-modal.modal-open .notifications-modal-content,
    .user-modal.modal-open .user-modal-content,
    .favorites-modal.modal-closing .favorites-modal-content,
    .notifications-modal.modal-closing .notifications-modal-content,
    .user-modal.modal-closing .user-modal-content {
        animation: none;
        transition: opacity 0.1s ease;
    }
}

/* ================================================================
   Z-INDEX HIERARCHY - ASEGURAR ORDEN CORRECTO
   ================================================================ */

.favorites-modal {
    z-index: 99999;
}

.notifications-modal {
    z-index: 100000;
}

.user-modal {
    z-index: 100001;
}

/* Contenido de modales siempre encima */
.favorites-modal-content {
    z-index: 100000 !important;
}

.notifications-modal-content {
    z-index: 100001 !important;
}

.user-modal-content {
    z-index: 100002 !important;
}
