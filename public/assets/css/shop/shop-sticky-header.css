/**
 * STICKY HEADER FOR SHOP PAGE
 * Header sticky que se mantiene visible al hacer scroll
 * @version 1.0
 */

/* Asegurar estructura correcta para sticky */
html, body {
    height: auto !important;
    overflow-x: hidden;
}

/* Header sticky globalmente - SIEMPRE VISIBLE */
body .header {
    position: fixed !important; /* Fixed para que SIEMPRE esté visible */
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    z-index: 99999 !important;
    background: #ffffff;
    box-shadow: 0px 2px 5px rgba(91, 91, 91, 0.08);
    transition: all 0.3s ease;
    will-change: transform;
    margin: 0 !important;
}

/* Compensar el espacio del header fixed en el body */
body {
    padding-top: 0 !important;
}

/* Asegurar que la sección shop tenga margen top para compensar header fixed */
.shop-modern {
    margin-top: 0 !important;
    padding-top: 85px !important; /* Altura del header */
}

/* Compensar espacio para breadcrumb y contenido */
.breadcrumb-option {
    margin-top: 0 !important;
}

/* Fix para botones del header - evitar que se corten */
.header__right {
    display: flex !important;
    align-items: center !important;
    gap: 15px !important;
    overflow: visible !important;
    padding: 15px 0 12px !important;
}

.header__right__auth,
.header__right__widget {
    display: flex !important;
    align-items: center !important;
    overflow: visible !important;
}

.header__right__widget {
    list-style: none !important;
    margin: 0 !important;
    padding: 0 !important;
    gap: 20px !important;
}

.header__right__widget li {
    position: relative !important;
    overflow: visible !important;
}

.header__right__auth a,
.header__right__widget li a {
    position: relative !important;
    overflow: visible !important;
    display: inline-block !important;
}

.header__right__auth a .tip,
.header__right__widget li a .tip {
    position: absolute !important;
    right: -12px !important;
    top: -11px !important;
    height: 22px !important;
    width: 22px !important;
    background: #ca1515 !important;
    font-size: 12px !important;
    font-weight: 600 !important;
    color: #ffffff !important;
    line-height: 22px !important;
    text-align: center !important;
    border-radius: 50% !important;
    z-index: 10 !important;
    pointer-events: none !important;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2) !important;
}

/* Mejorar shadow cuando se hace scroll */
body .header.scrolled {
    box-shadow: 0px 5px 15px rgba(91, 91, 91, 0.15);
}

/* Asegurar que contenedores no limiten el sticky */
.shop-modern {
    overflow: visible !important;
    margin-top: 0 !important;
    padding-top: 85px !important; /* Altura del header */
}

.shop-modern .container-fluid {
    overflow: visible !important;
    height: auto !important;
}

.shop-modern .row {
    overflow: visible !important;
    height: auto !important;
    display: flex !important;
    flex-wrap: wrap !important;
}

/* Asegurar que el aside permita sticky */
.shop-modern aside {
    position: relative !important;
    height: auto !important;
    overflow: visible !important;
}

/* Espacio entre sidebar y contenido principal usando padding */
.shop-modern .row > aside.col-lg-3,
.shop-modern .row > aside.col-md-4 {
    padding-right: 25px !important;
}

.shop-modern .row > main.col-lg-9,
.shop-modern .row > main.col-md-8 {
    padding-left: 25px !important;
}

/* Ajustar sidebar para que respete el header sticky - MÁXIMA PRIORIDAD */
body .shop-modern .modern-sidebar,
.shop-modern .modern-sidebar.shop-sidebar {
    position: -webkit-sticky !important; /* Safari */
    position: sticky !important;
    top: 100px !important; /* Altura del header fixed (85px) + margen (15px) */
    max-height: calc(100vh - 120px) !important; /* Altura disponible */
    overflow-y: auto !important;
    overflow-x: hidden !important;
    align-self: flex-start !important; /* MUY IMPORTANTE: evita que se estire */
    transform: none !important; /* Desactivar transforms de AOS que rompen sticky */
    animation: none !important; /* Desactivar animaciones que rompen sticky */
    will-change: auto !important;
    /* Scroll suave */
    scroll-behavior: smooth !important;
    -webkit-overflow-scrolling: touch !important;
}

/* Desactivar AOS en el sidebar para que no rompa sticky */
body .shop-modern .modern-sidebar[data-aos],
.shop-modern .modern-sidebar[data-aos].shop-sidebar {
    transform: none !important;
    transition-property: opacity !important;
    opacity: 1 !important;
}

/* Asegurar que el aside tenga la altura correcta */
.shop-modern aside {
    position: relative !important;
    height: auto !important;
}

/* Scrollbar personalizado para el sidebar */
.shop-modern .modern-sidebar::-webkit-scrollbar {
    width: 6px;
}

.shop-modern .modern-sidebar::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
}

.shop-modern .modern-sidebar::-webkit-scrollbar-thumb {
    background: #1a1a1a;
    border-radius: 10px;
}

.shop-modern .modern-sidebar::-webkit-scrollbar-thumb:hover {
    background: #1a1a1a;
}

/* Header del sidebar también sticky dentro del sidebar */
.shop-modern .sidebar-header {
    position: sticky;
    top: 0;
    background: var(--shop-card-bg);
    z-index: 10;
    padding-bottom: 16px;
    margin-bottom: 24px;
    border-bottom: 2px solid #e9ecef;
}

/* Dark mode support */
body.dark-mode .header {
    background: var(--dark-bg-primary);
    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.3);
}

body.dark-mode .header.scrolled {
    box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.5);
}

body.dark-mode .shop-modern .sidebar-header {
    background: var(--dark-bg-secondary);
    border-bottom-color: var(--dark-border);
}

/* Scrollbar dark mode */
body.dark-mode .shop-modern .modern-sidebar::-webkit-scrollbar-track {
    background: var(--dark-bg-tertiary);
}

body.dark-mode .shop-modern .modern-sidebar::-webkit-scrollbar-thumb {
    background: #c9a67c;
}

body.dark-mode .shop-modern .modern-sidebar::-webkit-scrollbar-thumb:hover {
    background: #d4b589;
}

/* Responsive adjustments */
@media (max-width: 991px) {
    /* En móvil, el sidebar no es sticky */
    .shop-modern .modern-sidebar {
        position: relative;
        top: auto;
        max-height: none;
    }
}

@media (max-width: 767px) {
    /* Header más compacto en móvil */
    .shop-modern .header {
        top: 0;
    }
    
    .shop-modern .modern-sidebar {
        top: auto;
        max-height: none;
    }
}

/* Animación suave al hacer scroll */
@keyframes headerSlideDown {
    from {
        transform: translateY(-100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.shop-modern .header {
    animation: headerSlideDown 0.3s ease-out;
}
